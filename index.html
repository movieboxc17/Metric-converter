<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Metric Converter v2</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 72 72'><text y='56' font-size='56'>🧮</text></svg>">
  <style>
:root {
  --accent: #7c3aed;
  --radius: 13px;
  --shadow: 0 6px 30px rgba(2,6,23,0.20);
  --font: Inter, ui-sans-serif, system-ui, Arial;
  --transition: background 0.22s, color 0.18s;
}

body[data-theme="dark"] {
  --bg: linear-gradient(135deg,#0f172a 0%, #071033 100%);
  --card: rgba(255,255,255,0.05);
  --glass: rgba(255,255,255,0.03);
  --border: rgba(255,255,255,0.06);
  --text: #e6eef8;
  --muted: #9ca3af;
  --quick: rgba(255,255,255,0.04);
  --input-bg: rgba(255,255,255,0.07);
}

body[data-theme="light"] {
  --bg: linear-gradient(135deg,#f3f4f6 0%, #dbeafe 100%);
  --card: rgba(255,255,255,0.98);
  --glass: rgba(0,0,0,0.02);
  --border: #e5e7eb;
  --text: #22223b;
  --muted: #6b7280;
  --quick: rgba(30,64,175,0.07);
  --input-bg: #f1f5f9;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  min-height: 100vh;
  margin: 0;
  transition: var(--transition);
  padding: 0;
}

.container {
  max-width: 980px;
  margin: 30px auto;
  padding: 16px;
}

.header {
  text-align: center;
  margin-bottom: 22px;
}
.header h1 {
  margin: 0;
  font-size: 29px;
  letter-spacing: 0.2px;
}
.header .subtitle {
  margin-top: 8px;
  color: var(--muted);
  font-size: 15px;
  font-weight: 400;
}
.theme-toggle {
  position: absolute;
  right: 26px;
  top: 24px;
  z-index: 5;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 50px;
  box-shadow: 0 2px 12px rgba(32,32,32,0.11);
  font-size: 18px;
  padding: 8px 17px;
  color: var(--text);
  cursor: pointer;
  transition: background 0.18s;
  display: flex;
  align-items: center;
  gap: 8px;
}
.theme-toggle:focus { outline: 2px solid var(--accent); }

.card {
  background: var(--card);
  border-radius: var(--radius);
  padding: 22px;
  box-shadow: var(--shadow);
  display: flex;
  gap: 18px;
  align-items: stretch;
  flex-wrap: wrap;
  border: 1px solid var(--border);
  transition: background 0.18s;
}

.controls {
  flex: 1 1 420px;
  min-width: 260px;
  display: flex;
  flex-direction: column;
  gap: 13px;
}
label {
  display: flex;
  flex-direction: column;
  font-size: 14px;
  color: var(--muted);
  gap: 6px;
  font-weight: 500;
}
select, input[type="number"] {
  background: var(--input-bg);
  border: 1px solid var(--border);
  color: inherit;
  padding: 11px 13px;
  border-radius: 9px;
  outline: none;
  font-size: 16px;
  transition: background 0.20s;
}
select:focus, input:focus { border: 1.5px solid var(--accent); }
select { cursor: pointer; }

.row {
  display: flex;
  gap: 10px;
  align-items: center;
}

.unit { flex: 1; }
.swap-col { display: flex; align-items: center; }
#swapBtn {
  background: var(--accent);
  color: white;
  border: none;
  width: 44px;
  height: 44px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 22px;
  box-shadow: 0 8px 18px rgba(124,58,237,0.10);
  transition: transform .13s ease;
}
#swapBtn:active { transform: scale(.96); }

.actions { display: flex; gap: 9px; }
button.primary {
  background: linear-gradient(90deg,var(--accent),#5b21b6);
  border: none;
  color: white;
  box-shadow: 0 10px 30px rgba(92,33,182,0.13);
  font-weight: 600;
  letter-spacing: 0.1px;
}
button.ghost {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--accent);
}
button { cursor: pointer; padding: 10px 14px; border-radius: 10px; border: 1px solid var(--border); font-size: 15px; transition: background 0.17s;}
button:focus { outline: 2px solid var(--accent); }

.result {
  width: 320px;
  min-width: 220px;
  background: var(--glass);
  border-radius: 12px;
  padding: 18px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 7px;
  border-left: 2px solid var(--accent);
}

.result .value {
  font-size: 22px;
  font-weight: 700;
  color: var(--accent);
}
.result .meta { font-size: 14px; color: var(--muted); margin-top: 5px; }

.quick { margin-top: 15px; color: var(--muted); }
.quick h3 { margin: 0 0 11px 0; font-size: 16px; }
.quick-grid {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.quick-item {
  padding: 9px 12px;
  background: var(--quick);
  border-radius: 10px;
  font-size: 14px;
  cursor: pointer;
  border: 1px solid var(--border);
  transition: transform .09s, background 0.15s;
}
.quick-item:active, .quick-item:focus { background: var(--accent); color: white; transform: scale(.97); outline: none;}

.footer { text-align: center; margin-top: 19px; color: var(--muted); font-size: 14px; }

@media (max-width:880px) {
  .card { flex-direction: column; }
  .result { width: 100%; margin-top: 12px;}
}
@media (max-width:580px) {
  .container { padding: 3px; }
  .header { margin-bottom: 14px;}
  .card { padding: 10px;}
  .result { padding: 10px;}
  .theme-toggle { right: 7px; top: 11px;}
}
  </style>
</head>
<body data-theme="dark">
  <main class="container" aria-label="Metric Converter main content">
    <button class="theme-toggle" id="themeBtn" aria-label="Toggle light/dark theme">
      <span id="themeIcon">🌙</span> Theme
    </button>
    <header class="header">
      <h1>Metric Converter v2</h1>
      <p class="subtitle">Convert length, mass, volume, area, temperature, time, and data — with style!</p>
    </header>

    <section class="card" aria-label="Conversion panel">
      <div class="controls">
        <label for="category">
          Category
          <select id="category" aria-label="Conversion category"></select>
        </label>

        <div class="row">
          <label class="unit" for="fromUnit">
            From
            <select id="fromUnit" aria-label="From unit"></select>
          </label>

          <div class="swap-col">
            <button id="swapBtn" title="Swap units" aria-label="Swap units">⇄</button>
          </div>

          <label class="unit" for="toUnit">
            To
            <select id="toUnit" aria-label="To unit"></select>
          </label>
        </div>

        <label for="inputValue">
          Value
          <input id="inputValue" type="number" step="any" placeholder="Enter a number" aria-label="Value to convert" />
        </label>

        <div class="actions">
          <button id="convertBtn" class="primary" aria-label="Convert value">Convert</button>
          <button id="resetBtn" class="ghost" aria-label="Reset input">Reset</button>
        </div>
      </div>

      <div class="result" id="result" aria-live="polite">
        <div class="value" id="resultValue">—</div>
        <div class="meta" id="resultMeta"></div>
      </div>
    </section>

    <section class="quick" aria-label="Quick conversions">
      <h3>Quick conversions</h3>
      <div class="quick-grid" id="quickGrid"></div>
    </section>

    <footer class="footer">
      <small>Made with Copilot &amp; 🧮 &mdash; <a href="https://github.com/movieboxc17/Metric-converter" style="color:var(--accent);text-decoration:none;">GitHub Project</a></small>
    </footer>
  </main>
  <script>
const UNITS = {
  Length: {
    base: 'm',
    units: {
      'km': 1000, 'm': 1, 'dm': 0.1, 'cm': 0.01, 'mm': 0.001,
      'mi': 1609.344, 'yd': 0.9144, 'ft': 0.3048, 'in': 0.0254
    }
  },
  Volume: {
    base: 'L',
    units: {
      'm³': 1000, 'L': 1, 'mL': 0.001,
      'gal (US)': 3.785411784, 'qt (US)': 0.946352946, 'pt (US)': 0.473176473,
      'floz (US)': 0.0295735295625
    }
  },
  Mass: {
    base: 'kg',
    units: {
      't': 1000, 'kg': 1, 'g': 0.001, 'mg': 0.000001,
      'lb': 0.45359237, 'oz': 0.028349523125
    }
  },
  Area: {
    base: 'm²',
    units: {
      'km²': 1_000_000, 'm²': 1, 'dm²': 0.01, 'cm²': 0.0001, 'mm²': 0.000001,
      'acre': 4046.8564224, 'ha': 10000
    }
  },
  Temperature: {
    base: '°C',
    units: { '°C': 'c', '°F': 'f', 'K': 'k' }
  },
  Time: {
    base: 's',
    units: {
      'd': 86400, 'h': 3600, 'min': 60, 's': 1, 'ms': 0.001, 'µs': 0.000001
    }
  },
  Data: {
    base: 'B',
    units: {
      'TB': 1_099_511_627_776, 'GB': 1_073_741_824, 'MB': 1_048_576,
      'KB': 1024, 'B': 1, 'bit': 0.125
    }
  }
};

// DOM
const categoryEl = document.getElementById('category');
const fromEl = document.getElementById('fromUnit');
const toEl = document.getElementById('toUnit');
const inputEl = document.getElementById('inputValue');
const convertBtn = document.getElementById('convertBtn');
const resetBtn = document.getElementById('resetBtn');
const swapBtn = document.getElementById('swapBtn');
const resultValueEl = document.getElementById('resultValue');
const resultMetaEl = document.getElementById('resultMeta');
const quickGrid = document.getElementById('quickGrid');
const themeBtn = document.getElementById('themeBtn');
const themeIcon = document.getElementById('themeIcon');

function populateCategories(){
  categoryEl.innerHTML = '';
  Object.keys(UNITS).forEach(cat=>{
    const opt = document.createElement('option');
    opt.value = cat;
    opt.textContent = cat;
    categoryEl.appendChild(opt);
  });
}

function populateUnits(category){
  fromEl.innerHTML = '';
  toEl.innerHTML = '';
  const u = UNITS[category].units;
  Object.keys(u).forEach(name=>{
    const a = document.createElement('option');
    a.value = name; a.textContent = name;
    fromEl.appendChild(a);
    const b = a.cloneNode(true);
    toEl.appendChild(b);
  });
}

function formatNumber(n){
  if (!isFinite(n)) return '—';
  if (Math.abs(n) >= 1) return Number(n.toFixed(6)).toLocaleString();
  return Number(n.toPrecision(6)).toString();
}

// Temperature conversions
function tempToC(value, unit){
  if (unit === '°C' || unit === 'c') return Number(value);
  if (unit === '°F' || unit === 'f') return (Number(value) - 32) * 5/9;
  if (unit === 'K' || unit === 'k') return Number(value) - 273.15;
  return NaN;
}
function cToTemp(celsius, unit){
  if (unit === '°C' || unit === 'c') return celsius;
  if (unit === '°F' || unit === 'f') return (celsius * 9/5) + 32;
  if (unit === 'K' || unit === 'k') return celsius + 273.15;
  return NaN;
}

function convert(){
  const category = categoryEl.value;
  const from = fromEl.value;
  const to = toEl.value;
  const raw = inputEl.value.trim();
  if (raw === '') {
    resultValueEl.textContent = '—';
    resultMetaEl.textContent = '';
    return;
  }
  const value = Number(raw);
  if (!isFinite(value)) {
    resultValueEl.textContent = 'Invalid';
    resultMetaEl.textContent = '';
    return;
  }

  if (category === 'Temperature'){
    const c = tempToC(value, from);
    const out = cToTemp(c, to);
    resultValueEl.textContent = `${formatNumber(out)} ${to}`;
    resultMetaEl.textContent = `${value} ${from} → ${formatNumber(out)} ${to}`;
    return;
  }

  const mapping = UNITS[category].units;
  const baseFrom = mapping[from];
  const baseTo = mapping[to];
  // convert to base, then to target
  const inBase = value * baseFrom;
  const out = inBase / baseTo;
  resultValueEl.textContent = `${formatNumber(out)} ${to}`;
  resultMetaEl.textContent = `${value} ${from} → ${formatNumber(out)} ${to}`;
}

function reset(){
  inputEl.value = '';
  resultValueEl.textContent = '—';
  resultMetaEl.textContent = '';
  inputEl.focus();
}

function swap(){
  const a = fromEl.value;
  fromEl.value = toEl.value;
  toEl.value = a;
  convert();
}

function buildQuick(){
  // helpful presets for quick conversions
  const presets = [
    {cat:'Length', from:'km', to:'mi', v: '1'},
    {cat:'Length', from:'m', to:'ft', v: '10'},
    {cat:'Volume', from:'L', to:'gal (US)', v: '3.5'},
    {cat:'Mass', from:'kg', to:'lb', v: '5'},
    {cat:'Temperature', from:'°C', to:'°F', v: '20'},
    {cat:'Time', from:'h', to:'min', v: '1'},
    {cat:'Data', from:'MB', to:'KB', v: '1'},
    {cat:'Area', from:'ha', to:'acre', v: '1'}
  ];
  quickGrid.innerHTML = '';
  presets.forEach(p=>{
    const el = document.createElement('button');
    el.className = 'quick-item';
    el.textContent = `${p.v} ${p.from} → ${p.to}`;
    el.title = `Convert ${p.v} ${p.from} to ${p.to}`;
    el.setAttribute('tabindex', '0');
    el.onclick = ()=>{
      categoryEl.value = p.cat;
      populateUnits(p.cat);
      fromEl.value = p.from;
      toEl.value = p.to;
      inputEl.value = p.v;
      convert();
      inputEl.focus();
    };
    quickGrid.appendChild(el);
  });
}

// Theme toggling
function setTheme(theme){
  document.body.setAttribute('data-theme', theme);
  themeIcon.textContent = theme === 'dark' ? '🌙' : '☀️';
  localStorage.setItem("metricTheme", theme);
}
function toggleTheme(){
  const current = document.body.getAttribute('data-theme');
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Keyboard accessibility for swap + quicks
swapBtn.addEventListener('keyup', e => { if (e.key === "Enter") swap(); });
// Focus quicks with Tab, activate with Enter
quickGrid.addEventListener('keyup', e => {
  if (e.target.classList.contains('quick-item') && e.key === "Enter") e.target.click();
});

// events
convertBtn.addEventListener('click', convert);
resetBtn.addEventListener('click', reset);
swapBtn.addEventListener('click', swap);
themeBtn.addEventListener('click', toggleTheme);
categoryEl.addEventListener('change', ()=>{
  populateUnits(categoryEl.value); reset();
});
[inputEl, fromEl, toEl].forEach(el => el.addEventListener('input', convert));

// init
(function(){
  // Theme setup
  const userTheme = localStorage.getItem("metricTheme");
  setTheme(userTheme === "light" ? "light" : "dark");
  // Populate controls
  populateCategories();
  categoryEl.value = Object.keys(UNITS)[0];
  populateUnits(categoryEl.value);
  buildQuick();
  inputEl.focus();
})();
  </script>
</body>
</html>
